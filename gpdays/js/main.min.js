document.querySelector(".preloader")&&(window.onload=function(){window.setTimeout((()=>{enableScroll(),document.body.classList.add("loaded")}),1500)});const header=document.querySelector(".header"),mobMenu=document.querySelector(".mob-menu"),iconMenu=document.querySelector(".icon-menu"),modalOpenBtn=document.querySelectorAll(".mod-open-btn"),modalCloseBtn=document.querySelectorAll(".mod-close-btn"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector("#success-mod"),errorModal=document.querySelector("#error-mod");let animSpd=400;function sprite(e){return'<svg><use xlink:href="img/icons/sprite.svg#'+e+'"></use></svg>'}function scrollPos(){return window.pageYOffset||document.documentElement.scrollTop}function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((e=>e.style.paddingRight="0px")),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach((t=>t.style.paddingRight=e)),document.body.style.paddingRight=e,document.body.classList.add("no-scroll")}function openModal(e){let t=document.querySelector(".modal.open");t||iconMenu.classList.contains("open")||disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.classList.remove("open"),setTimeout((()=>{iconMenu.classList.contains("open")||enableScroll()}),animSpd)}function modClickOutside(){modal&&modal.forEach((e=>{e.addEventListener("click",(t=>{e.querySelector(".modal__content").contains(t.target)&&!e.querySelector(".btn-close").contains(t.target)||closeModal(e)}))}))}function setSuccessTxt(e=!1,t=!1,r=!1){switch(successModal.querySelector(".modal__top h2").innerHTML=e||"Заявка<br>успешно отправлена",successModal.querySelector(".modal__top p").textContent=t||"",r){case"football":successModal.querySelector(".modal__bg").setAttribute("src","img/modal-football.svg");break;case"hackaton":successModal.querySelector(".modal__bg").setAttribute("src","img/modal-hackaton.svg");break;default:successModal.querySelector(".modal__bg").setAttribute("src","img/modal-deer.svg")}}function setErrorTxt(e=!1,t=!1,r=!1){switch(errorModal.querySelector(".modal__top h2").innerHTML=e||"Что-то пошло не так",errorModal.querySelector(".modal__top p").textContent=t||"",r){case"football":errorModal.querySelector(".modal__bg").setAttribute("src","img/modal-football.svg");break;case"hackaton":errorModal.querySelector(".modal__bg").setAttribute("src","img/modal-hackaton.svg");break;default:errorModal.querySelector(".modal__bg").setAttribute("src","img/modal-deer.svg")}}function formReset(e){e.querySelectorAll(".item-form").forEach((e=>e.classList.remove("error"))),e.querySelectorAll("input").forEach((e=>{["hidden","checkbox","radio"].includes(e.type)||(e.value=""),["checkbox","radio"].includes(e.type)&&!e.classList.contains("required")&&(e.checked=!1)})),e.querySelector("textarea")&&(e.querySelector("textarea").value="")}function formSuccess(e,t=!1,r=!1,o=!1){formReset(e),setSuccessTxt(t,r,o),openModal(successModal)}modClickOutside(),modalOpenBtn&&modalOpenBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=e.getAttribute("data-modal");openModal(document.getElementById(r))}))})),modalCloseBtn&&modalCloseBtn.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=e.getAttribute("data-modal");closeModal(document.getElementById(r))}))}));const inp=document.querySelectorAll("input[type=tel]");function smoothDrop(e,t,r){if(t.style.overflow="hidden",t.style.transition=`height ${r}ms ease`,t.style["-webkit-transition"]=`height ${r}ms ease`,e.classList.contains("active")){e.classList.remove("open");let o=t.clientHeight+"px";t.style.height=o,setTimeout((function(){t.style.height="0",setTimeout((()=>{t.style.display="none",t.style.height=null,e.classList.remove("active")}),r)}),0)}else{e.classList.add("open"),t.style.display="block";let o=t.clientHeight+"px";t.style.height="0px",setTimeout((function(){t.style.height=o,setTimeout((()=>{t.style.height=null,e.classList.add("active")}),r)}),0)}}function tabSwitch(e,t){e.forEach(((r,o)=>{r.addEventListener("click",(()=>{e.forEach((e=>{e.classList.remove("active")})),t.forEach((e=>{e.classList.remove("active")})),r.classList.add("active"),t[o].classList.add("active"),r.style.opacity="0",t[o].style.opacity="0",setTimeout((()=>{r.style.opacity="1",t[o].style.opacity="1"}),0)}))}))}inp&&inp.forEach((e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)})),document.querySelector(".js-anchor")&&document.querySelectorAll(".js-anchor").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let r=window.pageYOffset||document.documentElement.scrollTop,o=document.querySelector(e.getAttribute("href")),l=0;o.querySelector(".reports__row")&&o.getBoundingClientRect().top<0&&(l=o.querySelector(".reports__row").clientHeight),iconMenu.classList.contains("open")?(iconMenu.click(),setTimeout((()=>{window.scrollTo({top:r-l+o.getBoundingClientRect().top-60,behavior:"smooth"})}),300)):window.scrollTo({top:r-l+o.getBoundingClientRect().top-60,behavior:"smooth"})}))})),window.addEventListener("scroll",(()=>{(window.pageYOffset||document.documentElement.scrollTop)>1?(header.classList.add("scrolled"),header.classList.contains("header--main")&&header.classList.add("header--dark")):(header.classList.remove("scrolled"),header.classList.contains("header--main")&&header.classList.remove("header--dark"))})),iconMenu.addEventListener("click",(()=>{iconMenu.classList.contains("open")?enableScroll():disableScroll(),iconMenu.classList.toggle("open"),mobMenu.classList.toggle("show")}));const customScroll=document.querySelectorAll(".custom-scroll");let isFirefox="undefined"!=typeof InstallTrigger;isFirefox&&(document.documentElement.style.scrollbarColor="#4cc326 #1E1E1E"),isFirefox&&customScroll&&customScroll.forEach((e=>{e.style.scrollbarColor="#4cc326 #1E1E1E"}));const accordion=document.querySelectorAll(".accordion");accordion&&accordion.forEach((e=>{e.querySelector(".accordion__header").addEventListener("click",(t=>{accordion.forEach((e=>{e.querySelector(".accordion__header").classList.contains("active")&&smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"),500)})),smoothDrop(e.querySelector(".accordion__header"),e.querySelector(".accordion__body"),500)}))}));const faq=document.querySelector(".faq");if(faq&&faq.querySelectorAll(".accordion").forEach(((e,t)=>{t<=8&&(e.querySelector(".accordion__header span").textContent="0"+(t+1))})),faq.querySelector(".faq__btn")){let e=faq.querySelector(".faq__btn").textContent;faq.querySelector(".faq__btn").addEventListener("click",(()=>{if(faq.querySelectorAll(".item-faq").length>faq.querySelectorAll(".item-faq.show").length)faq.querySelectorAll(".item-faq").forEach((e=>e.classList.add("show"))),faq.querySelector(".faq__btn span").textContent="свернуть",faq.querySelector(".faq__btn span").setAttribute("data-txt","свернуть");else{faq.querySelector(".faq__btn span").textContent=e,faq.querySelector(".faq__btn span").setAttribute("data-txt",e),faq.querySelectorAll(".item-faq").forEach((e=>e.classList.remove("show")));for(let e=0;e<5;e++)faq.querySelectorAll(".item-faq")[e]&&faq.querySelectorAll(".item-faq")[e].classList.add("show")}}))}const swiper2=document.querySelectorAll(".swiper2");swiper2&&swiper2.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1,spaceBetween:20,loop:!0,navigation:{prevEl:e.querySelector(".nav-btn--prev"),nextEl:e.querySelector(".nav-btn--next")},breakpoints:{1400.98:{spaceBetween:20,slidesPerView:2,loop:!1},767.98:{spaceBetween:10,slidesPerView:2,loop:!1}},speed:800})}));const swiper1=document.querySelectorAll(".swiper1");swiper1&&swiper1.forEach((e=>{new Swiper(e.querySelector(".swiper"),{slidesPerView:1,spaceBetween:20,loop:!0,navigation:{prevEl:e.querySelector(".nav-btn--prev"),nextEl:e.querySelector(".nav-btn--next")},breakpoints:{1400.98:{spaceBetween:20,slidesPerView:1,loop:!1},1200.98:{spaceBetween:10,slidesPerView:1,loop:!1},767.98:{spaceBetween:10,slidesPerView:2,loop:!1}},speed:800})}));const switchBlock=document.querySelectorAll(".switch-block");switchBlock&&switchBlock.forEach((e=>{tabSwitch(e.querySelectorAll("[data-nav]"),e.querySelectorAll("[data-block]"))}));const regModal=document.querySelector(".reg-mod");regModal&&regModal.querySelector(".main-btn").addEventListener("click",(()=>{let e=regModal.querySelector("input:checked").getAttribute("data-modal");openModal(document.querySelector(`#${e}`))}));const addExtra=document.querySelectorAll(".add-extra");addExtra&&addExtra.forEach((e=>{let t=e.querySelector(".add-extra__content").outerHTML;e.querySelector(".add-extra__btn").addEventListener("click",(()=>{e.classList.contains("hidden")?e.classList.remove("hidden"):e.querySelectorAll(".add-extra__content")[e.querySelectorAll(".add-extra__content").length-1].insertAdjacentHTML("afterend",t)}))}));const tourMod=document.querySelector(".tour-mod");function checkActiveFormat(){tourMod.querySelectorAll(".tour-mod__block").forEach((e=>{e.classList.remove("active");let t=tourMod.querySelector("input[name=tour-format]:checked").getAttribute("data-format");e.getAttribute("data-block")===t&&e.classList.add("active")}))}tourMod&&tourMod.querySelectorAll("input[name=tour-format]").forEach((e=>{checkActiveFormat(),e.addEventListener("change",checkActiveFormat)}));const purchForm=document.querySelectorAll(".purchase-mod__form");purchForm&&purchForm.forEach((e=>{e.querySelectorAll("input[name=ticket-type").forEach((t=>{t.addEventListener("change",(()=>{t.parentNode.classList.contains("all-tickets")?(e.querySelectorAll("input[name=ticket-type").forEach((e=>{e.removeAttribute("checked"),e.checked=!1})),t.setAttribute("checked",!0),t.checked=!0):e.querySelectorAll("input[name=ticket-type").forEach((e=>{e.parentNode.classList.contains("all-tickets")&&(e.removeAttribute("checked"),e.checked=!1)}))}))}))}));const reports=document.querySelector(".reports");let reportsTl=[];function reportTime(e){let t=e.getAttribute("data-start").split(":"),r=e.getAttribute("data-end").split(":");return{start:[0==Number(t[0].split()[0])?Number(t[0].substring(1)):Number(t[0]),0==Number(t[1].split()[0])?Number(t[1].substring(1)):Number(t[1])],end:[0==Number(r[0].split()[0])?Number(r[0].substring(1)):Number(r[0]),0==Number(r[1].split()[0])?Number(r[1].substring(1)):Number(r[1])]}}function setReportsGrid(){if(reports){let e,t=Number(reports.getAttribute("data-grid"));if(window.innerWidth>1200.98){let r=0;window.innerWidth<1400.98&&(r=18),e=[5,4,3].includes(t)?(144+r)/60:[2,1].includes(t)?(120+r)/60:(156+r)/60}else e=3.1;let r,o,l=[],c=[];if(reports&&reports.querySelector(".item-report")){reports.querySelectorAll(".item-report").forEach(((e,t)=>{let r=reportTime(e);l.push(r.start[0]),c.push(r.end[0])})),r=Math.min(...l),o=Math.max(...c),reports.querySelector(".reports__time").innerHTML="";for(let e=r;e<=o;e++)reports.querySelector(".reports__time").innerHTML+=`<span>${e<10?"0"+e:e}:00</span>`;reports.querySelectorAll(".reports__items").forEach((t=>{t.querySelectorAll(".item-report").forEach(((o,l)=>{let c=reportTime(o),s=c.end[1]-c.start[1],n=c.end[0]-c.start[0];if(s<0&&(n-=Math.abs(s)/60),o.style.height=e*n*60+(s>0?e*s:0)+"px",0!==l){let r=reportTime(t.querySelectorAll(".item-report")[l-1]),s=c.start[1]-r.end[1],n=c.start[0]-r.end[0];s<0&&(n-=Math.abs(s)/60),o.style.marginTop=e*n*60+(s>0?e*s:0)+"px"}else{let t=c.start[1],l=c.start[0]-r;o.style.marginTop=e*l*60+e*t+"px"}let a=o.querySelector(".item-report__title").clientHeight;o.querySelector(".item-report__title").style.overflow="visible";let i=o.querySelector(".item-report__title").clientHeight,d=parseInt(getComputedStyle(o.querySelector(".item-report__title")).getPropertyValue("line-height"));if(o.querySelector(".item-report__title").style.overflow="hidden",i-a>2){let e=parseInt(a/d);o.querySelector(".item-report__title").style.webkitLineClamp=e>0?e:1}o.querySelector(".item-report__inner").addEventListener("click",(()=>{document.querySelector("#item-report-mod .modal__content").innerHTML=o.querySelector(".item-report__mod .modal__content").innerHTML,openModal(document.querySelector("#item-report-mod"))}))}))}))}reports.classList.remove(".top-grad"),reports.classList.remove(".bot-grad"),document.querySelector(".reports__row").style.transform=null;let s=ScrollTrigger.getAll();console.log(s),s.forEach((e=>{e.kill(!0)})),reportsTrigger()}}function reportsModSuccess(e){let t=e.querySelectorAll("input[name=report-sec]:checked").length;if(t>0&&t!=e.querySelectorAll("input[name=report-sec]").length){let e;reports.setAttribute("data-grid",t),e=1==t?"секция":[2,3,4].includes(t)?"секции":"секций",document.querySelector(".reports__top .stroke-btn span").textContent=t+" "+e,document.querySelector(".reports__top .stroke-btn span").setAttribute("data-txt",t+" "+e)}else reports.setAttribute("data-grid",e.querySelectorAll("input[name=report-sec]").length),document.querySelector(".reports__top .stroke-btn span").textContent="Все секции",document.querySelector(".reports__top .stroke-btn span").setAttribute("data-txt","Все секции");0!=t?(reports.querySelectorAll(".reports__items").forEach((t=>{t.style.display="none",e.querySelectorAll("input[name=report-sec]:checked").forEach((e=>{t.getAttribute("data-section")==e.value&&(t.style.display="block")}))})),reports.querySelectorAll(".reports__sections span").forEach((t=>{t.style.display="none",e.querySelectorAll("input[name=report-sec]:checked").forEach((e=>{t.getAttribute("data-section")==e.value&&(t.style.display="flex")}))}))):(reports.querySelectorAll(".reports__items").forEach((e=>e.style.display="block")),reports.querySelectorAll(".reports__sections span").forEach((e=>e.style.display="flex"))),setReportsGrid(),closeModal(document.querySelector("#reports-mod"))}function reportDayOnClick(){let e=document.querySelectorAll(".reports__sections span").length;document.querySelector(".reports").setAttribute("data-grid",e),document.querySelectorAll(".reports-mod input[name=report-sec]").forEach((e=>{e.checked=!1,e.removeAttribute("checked")})),document.querySelector(".reports__top .stroke-btn span").textContent="Все секции",document.querySelector(".reports__top .stroke-btn span").setAttribute("data-txt","Все секции")}setReportsGrid(),window.addEventListener("resize",setReportsGrid);const reportModDays=document.querySelectorAll(".reports-mod input[name=report-day]");function reportsTrigger(){document.querySelector(".reports__scroll")&&(gsap.to(".reports__row",{y:-document.querySelector(".reports__row").offsetHeight,ease:"none",scrollTrigger:{trigger:".reports",pin:!0,scrub:1,start:"top 20px top",pinSpacing:!1,end:()=>"+="+document.querySelector(".reports__row").offsetHeight,invalidateOnRefresh:!0,anticipatePin:1}}),gsap.to(".reports__row",{ease:"none",scrollTrigger:{trigger:".reports",scrub:1,start:"top 20px top",end:"bottom bottom",onEnter:()=>{document.querySelector(".reports").classList.add("bot-grad")},onLeaveBack:()=>{document.querySelector(".reports").classList.remove("bot-grad")},onLeave:()=>{document.querySelector(".reports").classList.remove("bot-grad")},invalidateOnRefresh:!0,anticipatePin:1}}),gsap.to(".reports__row",{ease:"none",scrollTrigger:{trigger:".reports",scrub:1,start:"top 20px top",end:"bottom top",onEnter:()=>{document.querySelector(".reports").classList.add("top-grad"),header.classList.add("hidden")},onLeave:()=>{document.querySelector(".reports").classList.remove("top-grad"),header.classList.remove("hidden")},onEnterBack:()=>{document.querySelector(".reports").classList.add("top-grad"),header.classList.add("hidden")},onLeaveBack:()=>{document.querySelector(".reports").classList.remove("top-grad"),header.classList.remove("hidden")},invalidateOnRefresh:!0,anticipatePin:1}}))}reportModDays&&reportModDays.forEach(((e,t)=>{e.addEventListener("change",(()=>{document.querySelectorAll(".reports__tabs input[name=report-tab-day]")[t].click()}))}));let introILL=document.querySelectorAll(".intro__ill-img");introILL&&introILL.forEach((e=>{e.addEventListener("mouseenter",(t=>{if(window.innerWidth>1520){e.style.transitionDuration=".5s";const r=t.clientY,o=t.clientX;e.addEventListener("mousemove",(t=>{e.style.transitionDuration="0s";let l=t.clientX-o,c=t.clientY-r;e.style.transform="translate3d("+l/20+"px,"+c/20+"px,0)"})),e.addEventListener("mouseleave",(()=>{e.style.transform="translate3d(0,0,0)",e.style.transitionDuration=".5s"}))}}))})),$("[data-fancybox]").fancybox({infobar:!1,hash:!1,buttons:["close"],thumbs:!1});